<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .container { max-width: 400px; margin: auto; }
        .form-container { display: none; }
        .form-container.active { display: block; }
        .toggle-button { margin-top: 20px; cursor: pointer; color: blue; text-decoration: underline; }
        .alert { display: none; padding: 10px; margin-top: 10px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>

<div class="container">
    <h1>Login</h1>

    <div id="adminLogin" class="form-container active">
        <h2>Admin Login</h2>
        <div id="successAlertAdmin" class="alert success">Login successful!</div>
        <div id="errorAlertAdmin" class="alert error">Error logging in!</div>
        <form id="adminLoginForm">
            <input type="email" id="adminEmail" placeholder="Admin Email" required>
            <input type="password" id="adminPassword" placeholder="Password" required>
            <button type="submit">Login as Admin</button>
        </form>
        <span class="toggle-button" onclick="toggleForms()">Switch to Teacher Login</span>
    </div>

    <div id="teacherLogin" class="form-container">
        <h2>Teacher Login</h2>
        <div id="successAlertTeacher" class="alert success">Login successful!</div>
        <div id="errorAlertTeacher" class="alert error">Error logging in!</div>
        <form id="teacherLoginForm">
            <input type="email" id="teacherEmail" placeholder="Teacher Email" required>
            <input type="password" id="teacherPassword" placeholder="Password" required>
            <button type="submit">Login as Teacher</button>
        </form>
        <span class="toggle-button" onclick="toggleForms()">Switch to Admin Login</span>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
    const { createClient } = supabase;
    const supabaseUrl = 'https://mokqpjrqgjlekuhybclo.supabase.co';
    const supabaseKey = 'YOUR_SUPABASE_KEY'; // Replace with your actual key
    const supabase = createClient(supabaseUrl, supabaseKey);

    function toggleForms() {
        const adminLogin = document.getElementById('adminLogin');
        const teacherLogin = document.getElementById('teacherLogin');
        adminLogin.classList.toggle('active');
        teacherLogin.classList.toggle('active');
    }

    document.getElementById('adminLoginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('adminEmail').value;
        const password = document.getElementById('adminPassword').value;

        const { user, error } = await supabase.auth.signIn({ email, password });

        if (error) {
            document.getElementById('errorAlertAdmin').style.display = 'block';
            console.error('Admin login error:', error.message);
        } else {
            document.getElementById('successAlertAdmin').style.display = 'block';
            window.location.href = 'https://kunta-pro.github.io/Life-hack/admin-dashboard.html'; // Redirect to Admin Dashboard
        }
    });

    document.getElementById('teacherLoginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('teacherEmail').value;
        const password = document.getElementById('teacherPassword').value;

        const { user, error } = await supabase.auth.signIn({ email, password });

        if (error) {
            document.getElementById('errorAlertTeacher').style.display = 'block';
            console.error('Teacher login error:', error.message);
        } else {
            document.getElementById('successAlertTeacher').style.display = 'block';
            window.location.href = 'https://kunta-pro.github.io/Life-hack/teacher-dashboard.html'; // Redirect to Teacher Dashboard
        }
    });
</script>
</body>
</html>
